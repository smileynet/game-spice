phases:
  - id: phase-1
    title: "Phase 1: Active Game Tools"
    description: "Evolve game-spice from passive knowledge to interactive plugin with commands, agents, and implementation guidance"
    duration: "4-6 sessions"

    features:
      - id: feature-1.1
        title: "Scenario Walkthrough Command"
        priority: 1
        user_story: "As a game developer, I want to generate a structured 5-beat scenario walkthrough so I can visualize the player experience before building"
        acceptance_criteria:
          - "Running /game:walkthrough starts interactive 5-beat process"
          - "Each beat uses AskUserQuestion to gather player experience details"
          - "Produces docs/planning/walkthrough-<name>.md with all 5 beats"
          - "Output includes input/feedback mapping table for core actions"
          - "Walkthrough checklist items are all satisfied in output"
        tracer_strategy:
          minimal_flow: "Rename plugin → create command → run walkthrough → verify artifact"
          layers: "plugin.json → commands/walkthrough.md → output artifact"
          expansion: "Visual snapshot prompts, walkthrough diff/update (deferred)"

        tasks:
          - title: "Rename plugin and create command infrastructure"
            priority: 1
            tracer: "Foundation — proves /game:* prefix works and commands are discovered"
            description: |
              - Change plugin.json name from "game-spice" to "game"
              - Bump version to 0.4.0
              - Add "commands", "agents", "implementation" to keywords
              - Create commands/ directory
              - Create agents/ directory
            deliverable: "Plugin responds to /game:* prefix"

          - title: "Create walkthrough command"
            priority: 1
            depends_on: ["Rename plugin and create command infrastructure"]
            tracer: "First command — proves interactive artifact generation works"
            description: |
              - Create commands/walkthrough.md with frontmatter
              - Read existing planning context
              - For each of 5 beats, prompt user with beat-specific questions
              - Collect input/feedback mapping for core actions
              - Write complete walkthrough to docs/planning/walkthrough-<name>.md
              - Reference: skills/scenario-walkthrough/template.md
              - Reference: skills/scenario-walkthrough/SKILL.md
            deliverable: "commands/walkthrough.md that produces a complete 5-beat artifact"

      - id: feature-1.2
        title: "Game-Aware Code Review Agent"
        priority: 1
        blocks: ["feature-1.1"]
        user_story: "As a game developer, I want game-specific code review during serve so architecture issues like physics-in-render-loop or missing delta time are caught automatically"
        acceptance_criteria:
          - "game-reviewer agent is discoverable and invocable during /line:serve"
          - "Reviews code for all 8 architecture health scorecard categories"
          - "Detects engine type (Godot/Unity/Bevy/etc.) and applies engine-specific patterns"
          - "Output follows sous-chef format: verdict + severity-categorized issues"
          - "Does not duplicate generic sous-chef checks (focuses on game-specific only)"
        tracer_strategy:
          minimal_flow: "Create agent → invoke on sample game code → verify game-specific issues found"
          layers: "agents/game-reviewer.md → architecture-audit knowledge → engine sub-files"
          expansion: "Custom severity rules for game smells, integration testing with sous-chef (deferred)"

        tasks:
          - title: "Create game-reviewer agent"
            priority: 1
            tracer: "First agent — proves game-specific review works"
            description: |
              - Create agents/game-reviewer.md following sous-chef.md pattern
              - Engine detection: project.godot, Cargo.toml+bevy, *.unity, etc.
              - Apply 8-category health scorecard
              - Check for architecture smells
              - Output matches sous-chef format exactly
              - Reference: skills/architecture-audit/SKILL.md + engine sub-files
              - Reference: line-cook agents/sous-chef.md
            deliverable: "agents/game-reviewer.md with engine detection and 8-category review"

      - id: feature-1.3
        title: "Economy Balance Audit Command"
        priority: 2
        blocks: ["feature-1.2"]
        user_story: "As a game developer, I want to audit my game's economy and difficulty balance so I can catch design issues before they become code problems"
        acceptance_criteria:
          - "Running /game:balance-check reads planning docs and/or code"
          - "Applies 8 economy anti-pattern checks from balance.md"
          - "Applies 4 validation gates in order"
          - "Scores difficulty curve if difficulty design exists"
          - "Optional --report flag saves audit to docs/planning/"
          - "Output includes specific fix recommendations for each issue found"
        tracer_strategy:
          minimal_flow: "Create command → run on project with economy plan → verify issues detected"
          layers: "commands/balance-check.md → economy-design knowledge → difficulty-design knowledge"
          expansion: "Code scanning for numerical values, spreadsheet generation (deferred)"

        tasks:
          - title: "Create balance-check command"
            priority: 2
            tracer: "Proves on-demand audit pattern works for game-spice commands"
            description: |
              - Create commands/balance-check.md
              - Scan for planning docs with economy/balance context
              - Apply 4 validation gates from balance.md
              - Check 8 economy anti-patterns
              - Apply balance heuristics (TTFV, session-end progress, etc.)
              - Score difficulty curve if exists
              - Output structured report, optional --report to file
              - Reference: skills/economy-design/balance.md
              - Reference: skills/plan-audit/detailed-audits.md
              - Reference: skills/difficulty-design/SKILL.md
            deliverable: "commands/balance-check.md with economy audit and difficulty scoring"

      - id: feature-1.4
        title: "Implementation Phase Guidance"
        priority: 2
        blocks: ["feature-1.3"]
        user_story: "As a game developer, I want game-specific coding guidance during implementation so I follow correct patterns like fixed timestep, FSM state management, and input mapping"
        acceptance_criteria:
          - "Skill activates during /line:cook when game project context detected"
          - "Provides quick-reference patterns for the 6 core game architecture areas"
          - "Content is prescriptive ('do this') not diagnostic ('check for this')"
          - "Does not duplicate architecture-audit content (implementation vs audit framing)"
          - "Engine-agnostic core with optional engine-specific sub-files"
        tracer_strategy:
          minimal_flow: "Create skill → verify activation during cook → confirm guidance is actionable"
          layers: "skills/implementation/SKILL.md → optional engine sub-files"
          expansion: "Engine-specific sub-files, code snippet templates (deferred)"

        tasks:
          - title: "Create implementation skill"
            priority: 2
            tracer: "First cook-phase skill — proves implementation guidance works"
            description: |
              - Create skills/implementation/SKILL.md
              - Prescriptive content for 6 areas: game loop, state management,
                input handling, frame budget, entity architecture, delta time
              - Distill from architecture-audit, reframe as "how to build"
              - Cross-reference architecture-audit for detailed patterns
            deliverable: "skills/implementation/SKILL.md with 6-area quick reference"

      - id: feature-1.5
        title: "Documentation & Release"
        priority: 2
        blocks: ["feature-1.4"]
        user_story: "As a user discovering game-spice, I want to understand what commands, agents, and skills are available so I can use them effectively"
        acceptance_criteria:
          - "README documents all commands with usage examples"
          - "README documents game-reviewer agent and when it activates"
          - "Workflow diagram shows serve/cook integration (not just planning)"
          - "FAQ updated to reflect new capabilities"
          - "CHANGELOG documents v0.4.0 additions"
        tracer_strategy:
          minimal_flow: "Update README → update CHANGELOG → verify all capabilities documented"
          layers: "README.md → CHANGELOG.md"
          expansion: "Tutorial updates, separate command reference doc (deferred)"

        tasks:
          - title: "Update README and CHANGELOG"
            priority: 2
            description: |
              - Add Commands section to README with table
              - Add Agents section describing game-reviewer
              - Update workflow diagram for serve/cook
              - Update FAQ and skill count
              - Add v0.4.0 section to CHANGELOG
            deliverable: "Updated README.md and CHANGELOG.md"
